{% extends 'base.html' %}
{% load formutils %}

{% block content %}
    <div class="flex items-center justify-between mb-4 border-b py-2">
        <h1 class="text-3xl">Buckets</h1>
        {% if perms.content.add_bucket %}
            <a href="{% url 'bucket-create' %}">
                <div class='p-2 hover:text-blue-800 hover:bg-blue-100 rounded-md'>{% icon 'folder-plus' %}</div>
            </a>
        {%  endif %}
    </div>

    {% if object_list|length > 0 %}
    <table class="table-auto w-full border-spacing-y-2">
        <thead>
            <tr>
                <th class="text-left">Title</th>
                <th class="text-left">Content link</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {% for bucket in object_list %}
            <tr>
                <td class="py-2">
                    {% if perms.content.change_bucket %}
                        <a class="hover:underline" href="{% url 'bucket-update' bucket.id %}">{{ bucket.title }}</a>
                    {% else %}
                        {{ bucket.title }}
                    {% endif %}
                </td>
                <td><a class="hover:underline" href="/content/{{ bucket.slug }}">/content/{{ bucket.slug }}</a></td>
                {% if perms.content.delete_bucket %}
                    <td class="text-right">
                        <a href="{% url 'bucket-delete' bucket.id %}">
                            <div class="inline-block p-2 rounded-md hover:bg-red-100 hover:text-red-800">{% icon 'trash' ''%}</div>
                        </a>
                    </td>
                {% endif %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
        <div class="text-center py-12">No buckets available</div>
    {%  endif %}

{% endblock %}